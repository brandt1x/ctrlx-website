<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Thank You — Control-X</title>
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="ultimate.css">
	<link rel="icon" type="image/png" href="images/logo.png">
</head>

<body class="success-page">
	<canvas id="site-canvas-bg" class="site-canvas-bg" aria-hidden="true"></canvas>
	<div class="site-vignette" aria-hidden="true"></div>

	<header class="site-header">
		<div class="container header-inner">
			<a href="index.html"><img src="images/logo.png" alt="CTRLX Logo" class="logo-image logo-dark" /></a>
			<a href="index.html"><img src="images/whitelogo.png" alt="CTRLX Logo" class="logo-image logo-light" /></a>
			<div class="header-right">
				<nav class="nav-center">
					<div class="nav-group nav-left">
						<a href="index.html">Home</a>
						<a href="services.html">Services</a>
						<a href="zen-scripts.html">Zen Scripts</a>
					</div>
					<a href="ultimate.html" class="nav-ultimate nav-center-link">ULTIMATE</a>
					<div class="nav-group nav-right"></div>
				</nav>
				<div class="header-actions">
					<a href="contact.html" class="btn">Contact</a>
					<button id="theme-toggle" class="theme-toggle" type="button" aria-label="Toggle light mode">
						<span class="theme-toggle-switch">
							<span class="theme-icon theme-icon-dark">☾</span>
							<span class="theme-icon theme-icon-light">☀</span>
						</span>
					</button>
				</div>
			</div>
		</div>
	</header>

	<main class="success-main">
		<div class="success-card ultimate-product ultimate-tilt">
			<div class="ultimate-product-glow"></div>
			<div class="ultimate-product-content">
				<h2 class="success-title">Thank you for your purchase!</h2>
				<p class="success-subtitle">Your payment was successful.</p>
				<div id="success-downloads" class="success-downloads"></div>
				<div class="success-slide-box">
					<p class="success-support-text">Questions or need help? <a href="contact.html">Contact us</a> or <a href="https://discord.gg/q9KWFd9xxH" target="_blank" rel="noopener">join our Discord</a>.</p>
					<div class="success-support-btns">
						<a href="contact.html" class="btn">Contact Page</a>
						<a href="https://discord.gg/q9KWFd9xxH" target="_blank" rel="noopener" class="btn ghost">Join Discord</a>
					</div>
				</div>
			</div>
		</div>
	</main>

	<footer class="site-footer">
		<div class="container">
			<small>© <span id="year"></span> Control-X — All lawful services.</small>
		</div>
	</footer>

	<script src="script.js"></script>
	<script src="cinematic.js"></script>
	<script>
		(function setupSuccessDownloads() {
			const params = new URLSearchParams(window.location.search);
			const sessionId = params.get('session_id');
			const container = document.getElementById('success-downloads');
			if (!sessionId || !container) return;

			fetch(`${window.location.origin}/api/verify-session?session_id=${encodeURIComponent(sessionId)}`)
				.then((r) => r.json())
				.then((data) => {
					if (!data.paid) return;
					const links = [];
					if (data.hasControlX) {
						links.push(`<a href="/api/download-script?session_id=${encodeURIComponent(sessionId)}&script=control-x" class="btn success-dl-btn">⬇ Download CONTROL+X Ultimate Script (.gpc)</a>`);
					}
					if (data.hasVisionX) {
						links.push(`<a href="/api/download-vision-x?session_id=${encodeURIComponent(sessionId)}" class="btn success-dl-btn">⬇ Download Vision-X Tempo</a>`);
					}
					if (data.hasAllBundle) {
						links.push(`<a href="/api/download-all-scripts?session_id=${encodeURIComponent(sessionId)}" class="btn success-dl-btn">⬇ Download All Scripts</a>`);
					} else {
						if (data.has2K) {
							links.push(`<a href="/api/download-script?session_id=${encodeURIComponent(sessionId)}&script=2k" class="btn success-dl-btn">⬇ Download 2K Script (.gpc)</a>`);
						}
						if (data.hasCOD) {
							links.push(`<a href="/api/download-script?session_id=${encodeURIComponent(sessionId)}&script=cod" class="btn success-dl-btn">⬇ Download COD Script (.gpc)</a>`);
						}
						if (data.hasApex) {
							links.push(`<a href="/api/download-script?session_id=${encodeURIComponent(sessionId)}&script=apex" class="btn success-dl-btn">⬇ Download Apex Script (.gpc)</a>`);
						}
						if (data.hasArc) {
							links.push(`<a href="/api/download-script?session_id=${encodeURIComponent(sessionId)}&script=arc" class="btn success-dl-btn">⬇ Download ARC Script (.gpc)</a>`);
						}
						if (data.hasFortnite) {
							links.push(`<a href="/api/download-script?session_id=${encodeURIComponent(sessionId)}&script=fortnite" class="btn success-dl-btn">⬇ Download Fortnite Script (.gpc)</a>`);
						}
						if (data.hasSiege) {
							links.push(`<a href="/api/download-script?session_id=${encodeURIComponent(sessionId)}&script=siege" class="btn success-dl-btn">⬇ Download Siege Script (.gpc)</a>`);
						}
						if (data.hasRust) {
							links.push(`<a href="/api/download-script?session_id=${encodeURIComponent(sessionId)}&script=rust" class="btn success-dl-btn">⬇ Download Rust Script (.gpc)</a>`);
						}
					}
					if (links.length) {
						let instructions = '';
						if (data.hasVisionX && !data.hasControlX && !data.has2K && !data.hasCOD && !data.hasApex && !data.hasArc && !data.hasFortnite && !data.hasSiege && !data.hasRust && !data.hasAllBundle) {
							instructions = '<p class="success-instruction">Extract the ZIP, run <code>npm install</code>, then double-click Launch Vision-X Tempo.bat.</p>';
						} else if (data.hasVisionX || data.hasControlX || data.has2K || data.hasCOD || data.hasApex || data.hasArc || data.hasFortnite || data.hasSiege || data.hasRust || data.hasAllBundle) {
							instructions = '<p class="success-instruction">Load the .gpc file(s) into Zen Studio and flash to your CronusZen.</p>';
							if (data.hasVisionX) instructions += '<p class="success-instruction">For Vision-X: extract the ZIP, run <code>npm install</code>, then Launch Vision-X Tempo.bat.</p>';
						}
						container.innerHTML = '<div class="success-download-list">' + links.join('') + '</div>' + instructions;
					}
				})
				.catch(() => {});
		})();
	</script>
</body>

</html>
